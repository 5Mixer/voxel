// Generated by HLC 4.1.3 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <kha/audio2/ResamplingAudioChannel.h>
void kha_audio2_AudioChannel_new(kha__audio2__AudioChannel,bool);
#include <hl/natives.h>
void kha_audio2_Audio1__playAgain(kha__audio2__AudioChannel);
#include <kha/audio2/Audio.h>
extern kha__audio2__$Audio g$_kha_audio2_Audio;

void kha_audio2_ResamplingAudioChannel_new(kha__audio2__ResamplingAudioChannel r0,bool r1,int r2) {
	kha_audio2_AudioChannel_new(((kha__audio2__AudioChannel)r0),r1);
	r0->sampleRate = r2;
	return;
}

void kha_audio2_ResamplingAudioChannel_nextSamples(kha__audio2__ResamplingAudioChannel r0,kha__arrays__Float32ArrayPrivate r1,int r2,int r3) {
	bool r5;
	float r13, r27, r29;
	kha__arrays__Float32ArrayPrivate r11;
	double r14, r15, r16, r22, r28, r30;
	vbyte *r10;
	int r6, r7, r8, r9, r12, r17, r18, r19, r20, r21, r23, r24, r25, r26;
	r5 = r0->paused;
	if( r5 ) goto label$2f9bd3c_2_4;
	r5 = r0->stopped;
	if( !r5 ) goto label$2f9bd3c_2_17;
	label$2f9bd3c_2_4:
	r6 = 0;
	r7 = r2;
	label$2f9bd3c_2_6:
	if( r6 >= r7 ) goto label$2f9bd3c_2_16;
	r8 = r6;
	++r6;
	if( r1 == NULL ) hl_null_access();
	r10 = r1->self;
	r12 = 0;
	r13 = (float)r12;
	hl_kore_float32array_set(r10,r8,r13);
	goto label$2f9bd3c_2_6;
	label$2f9bd3c_2_16:
	return;
	label$2f9bd3c_2_17:
	r6 = 0;
	label$2f9bd3c_2_18:
	if( r6 >= r2 ) goto label$2f9bd3c_2_213;
	r7 = 0;
	r11 = r0->data;
	if( r11 == NULL ) hl_null_access();
	r8 = r11->length;
	r14 = (double)r8;
	r15 = (double)r3;
	r8 = r0->sampleRate;
	r16 = (double)r8;
	r15 = r15 / r16;
	r14 = r14 * r15;
	r8 = hl_math_ceil(r14);
	r12 = 2;
	r9 = r12 == 0 ? 0 : r8 % r12;
	r12 = 0;
	if( r9 != r12 ) goto label$2f9bd3c_2_37;
	r9 = r8;
	goto label$2f9bd3c_2_39;
	label$2f9bd3c_2_37:
	r12 = 1;
	r9 = r8 + r12;
	label$2f9bd3c_2_39:
	r12 = r0->myPosition;
	r9 = r9 - r12;
	r12 = r2 - r6;
	if( r9 >= r12 ) goto label$2f9bd3c_2_45;
	r17 = r9;
	goto label$2f9bd3c_2_46;
	label$2f9bd3c_2_45:
	r17 = r12;
	label$2f9bd3c_2_46:
	if( r7 >= r17 ) goto label$2f9bd3c_2_185;
	++r7;
	r18 = r6;
	++r6;
	r19 = r0->myPosition;
	r20 = r19;
	++r19;
	r0->myPosition = r19;
	r19 = r20;
	r21 = 2;
	r20 = r21 == 0 ? 0 : r20 % r21;
	r21 = 0;
	if( r20 == r21 ) goto label$2f9bd3c_2_62;
	r5 = false;
	goto label$2f9bd3c_2_63;
	label$2f9bd3c_2_62:
	r5 = true;
	label$2f9bd3c_2_63:
	r20 = r0->sampleRate;
	r14 = (double)r20;
	r15 = (double)r3;
	r14 = r14 / r15;
	if( !r5 ) goto label$2f9bd3c_2_123;
	r21 = 2;
	r20 = r21 == 0 ? 0 : r19 / r21;
	r16 = (double)r20;
	r15 = r14 * r16;
	r20 = hl_math_floor(r15);
	r22 = 1.;
	r16 = r15 + r22;
	r21 = hl_math_floor(r16);
	r24 = 2;
	r23 = r20 * r24;
	r20 = r23;
	r24 = 2;
	r23 = r21 * r24;
	r21 = r23;
	r23 = 0;
	r11 = r0->data;
	if( r11 == NULL ) hl_null_access();
	r24 = r11->length;
	r25 = 1;
	r24 = r24 - r25;
	r26 = 2;
	r25 = r26 == 0 ? 0 : r24 % r26;
	r26 = 0;
	if( r25 == r26 ) goto label$2f9bd3c_2_93;
	--r24;
	label$2f9bd3c_2_93:
	if( r20 < r23 ) goto label$2f9bd3c_2_95;
	if( r24 >= r20 ) goto label$2f9bd3c_2_98;
	label$2f9bd3c_2_95:
	r25 = 0;
	r13 = (float)r25;
	goto label$2f9bd3c_2_102;
	label$2f9bd3c_2_98:
	r11 = r0->data;
	if( r11 == NULL ) hl_null_access();
	r10 = r11->self;
	r13 = hl_kore_float32array_get(r10,r20);
	label$2f9bd3c_2_102:
	if( r21 < r23 ) goto label$2f9bd3c_2_104;
	if( r24 >= r21 ) goto label$2f9bd3c_2_107;
	label$2f9bd3c_2_104:
	r25 = 0;
	r27 = (float)r25;
	goto label$2f9bd3c_2_111;
	label$2f9bd3c_2_107:
	r11 = r0->data;
	if( r11 == NULL ) hl_null_access();
	r10 = r11->self;
	r27 = hl_kore_float32array_get(r10,r21);
	label$2f9bd3c_2_111:
	r25 = hl_math_floor(r15);
	r22 = (double)r25;
	r16 = r15 - r22;
	r22 = 1.;
	r22 = r22 - r16;
	r28 = (double)r13;
	r22 = r22 * r28;
	r30 = (double)r27;
	r28 = r16 * r30;
	r22 = r22 + r28;
	r29 = (float)r22;
	goto label$2f9bd3c_2_181;
	label$2f9bd3c_2_123:
	r21 = 2;
	r20 = r21 == 0 ? 0 : r19 / r21;
	r16 = (double)r20;
	r15 = r14 * r16;
	r20 = hl_math_floor(r15);
	r22 = 1.;
	r16 = r15 + r22;
	r21 = hl_math_floor(r16);
	r24 = 2;
	r23 = r20 * r24;
	r24 = 1;
	r23 = r23 + r24;
	r20 = r23;
	r24 = 2;
	r23 = r21 * r24;
	r24 = 1;
	r23 = r23 + r24;
	r21 = r23;
	r23 = 1;
	r11 = r0->data;
	if( r11 == NULL ) hl_null_access();
	r24 = r11->length;
	r25 = 1;
	r24 = r24 - r25;
	r26 = 2;
	r25 = r26 == 0 ? 0 : r24 % r26;
	r26 = 0;
	if( r25 != r26 ) goto label$2f9bd3c_2_152;
	--r24;
	label$2f9bd3c_2_152:
	if( r20 < r23 ) goto label$2f9bd3c_2_154;
	if( r24 >= r20 ) goto label$2f9bd3c_2_157;
	label$2f9bd3c_2_154:
	r25 = 0;
	r13 = (float)r25;
	goto label$2f9bd3c_2_161;
	label$2f9bd3c_2_157:
	r11 = r0->data;
	if( r11 == NULL ) hl_null_access();
	r10 = r11->self;
	r13 = hl_kore_float32array_get(r10,r20);
	label$2f9bd3c_2_161:
	if( r21 < r23 ) goto label$2f9bd3c_2_163;
	if( r24 >= r21 ) goto label$2f9bd3c_2_166;
	label$2f9bd3c_2_163:
	r25 = 0;
	r27 = (float)r25;
	goto label$2f9bd3c_2_170;
	label$2f9bd3c_2_166:
	r11 = r0->data;
	if( r11 == NULL ) hl_null_access();
	r10 = r11->self;
	r27 = hl_kore_float32array_get(r10,r21);
	label$2f9bd3c_2_170:
	r25 = hl_math_floor(r15);
	r22 = (double)r25;
	r16 = r15 - r22;
	r22 = 1.;
	r22 = r22 - r16;
	r28 = (double)r13;
	r22 = r22 * r28;
	r30 = (double)r27;
	r28 = r16 * r30;
	r22 = r22 + r28;
	r29 = (float)r22;
	label$2f9bd3c_2_181:
	if( r1 == NULL ) hl_null_access();
	r10 = r1->self;
	hl_kore_float32array_set(r10,r18,r29);
	goto label$2f9bd3c_2_46;
	label$2f9bd3c_2_185:
	r7 = r0->myPosition;
	r11 = r0->data;
	if( r11 == NULL ) hl_null_access();
	r8 = r11->length;
	r14 = (double)r8;
	r15 = (double)r3;
	r8 = r0->sampleRate;
	r16 = (double)r8;
	r15 = r15 / r16;
	r14 = r14 * r15;
	r8 = hl_math_ceil(r14);
	r17 = 2;
	r12 = r17 == 0 ? 0 : r8 % r17;
	r17 = 0;
	if( r12 != r17 ) goto label$2f9bd3c_2_202;
	r12 = r8;
	goto label$2f9bd3c_2_204;
	label$2f9bd3c_2_202:
	r17 = 1;
	r12 = r8 + r17;
	label$2f9bd3c_2_204:
	if( r7 < r12 ) goto label$2f9bd3c_2_212;
	r9 = 0;
	r0->myPosition = r9;
	r5 = r0->looping;
	if( r5 ) goto label$2f9bd3c_2_212;
	r5 = true;
	r0->stopped = r5;
	goto label$2f9bd3c_2_213;
	label$2f9bd3c_2_212:
	goto label$2f9bd3c_2_18;
	label$2f9bd3c_2_213:
	if( r6 >= r2 ) goto label$2f9bd3c_2_223;
	if( r1 == NULL ) hl_null_access();
	r10 = r1->self;
	r7 = r6;
	++r6;
	r8 = 0;
	r13 = (float)r8;
	hl_kore_float32array_set(r10,r7,r13);
	goto label$2f9bd3c_2_213;
	label$2f9bd3c_2_223:
	return;
}

double kha_audio2_ResamplingAudioChannel_sample(kha__audio2__ResamplingAudioChannel r0,int r1,int r2) {
	bool r3;
	float r15, r17;
	kha__arrays__Float32ArrayPrivate r12;
	double r6, r7, r8, r9, r18, r19;
	vbyte *r16;
	int r4, r5, r10, r11, r13, r14;
	r5 = 2;
	r4 = r5 == 0 ? 0 : r1 % r5;
	r5 = 0;
	if( r4 == r5 ) goto label$2f9bd3c_3_6;
	r3 = false;
	goto label$2f9bd3c_3_7;
	label$2f9bd3c_3_6:
	r3 = true;
	label$2f9bd3c_3_7:
	r4 = r0->sampleRate;
	r6 = (double)r4;
	r7 = (double)r2;
	r6 = r6 / r7;
	if( !r3 ) goto label$2f9bd3c_3_66;
	r5 = 2;
	r4 = r5 == 0 ? 0 : r1 / r5;
	r8 = (double)r4;
	r7 = r6 * r8;
	r4 = hl_math_floor(r7);
	r9 = 1.;
	r8 = r7 + r9;
	r5 = hl_math_floor(r8);
	r11 = 2;
	r10 = r4 * r11;
	r4 = r10;
	r11 = 2;
	r10 = r5 * r11;
	r5 = r10;
	r10 = 0;
	r12 = r0->data;
	if( r12 == NULL ) hl_null_access();
	r11 = r12->length;
	r13 = 1;
	r11 = r11 - r13;
	r14 = 2;
	r13 = r14 == 0 ? 0 : r11 % r14;
	r14 = 0;
	if( r13 == r14 ) goto label$2f9bd3c_3_37;
	--r11;
	label$2f9bd3c_3_37:
	if( r4 < r10 ) goto label$2f9bd3c_3_39;
	if( r11 >= r4 ) goto label$2f9bd3c_3_42;
	label$2f9bd3c_3_39:
	r13 = 0;
	r15 = (float)r13;
	goto label$2f9bd3c_3_46;
	label$2f9bd3c_3_42:
	r12 = r0->data;
	if( r12 == NULL ) hl_null_access();
	r16 = r12->self;
	r15 = hl_kore_float32array_get(r16,r4);
	label$2f9bd3c_3_46:
	if( r5 < r10 ) goto label$2f9bd3c_3_48;
	if( r11 >= r5 ) goto label$2f9bd3c_3_51;
	label$2f9bd3c_3_48:
	r13 = 0;
	r17 = (float)r13;
	goto label$2f9bd3c_3_55;
	label$2f9bd3c_3_51:
	r12 = r0->data;
	if( r12 == NULL ) hl_null_access();
	r16 = r12->self;
	r17 = hl_kore_float32array_get(r16,r5);
	label$2f9bd3c_3_55:
	r13 = hl_math_floor(r7);
	r9 = (double)r13;
	r8 = r7 - r9;
	r9 = 1.;
	r9 = r9 - r8;
	r18 = (double)r15;
	r9 = r9 * r18;
	r19 = (double)r17;
	r18 = r8 * r19;
	r9 = r9 + r18;
	return r9;
	label$2f9bd3c_3_66:
	r5 = 2;
	r4 = r5 == 0 ? 0 : r1 / r5;
	r8 = (double)r4;
	r7 = r6 * r8;
	r4 = hl_math_floor(r7);
	r9 = 1.;
	r8 = r7 + r9;
	r5 = hl_math_floor(r8);
	r11 = 2;
	r10 = r4 * r11;
	r11 = 1;
	r10 = r10 + r11;
	r4 = r10;
	r11 = 2;
	r10 = r5 * r11;
	r11 = 1;
	r10 = r10 + r11;
	r5 = r10;
	r10 = 1;
	r12 = r0->data;
	if( r12 == NULL ) hl_null_access();
	r11 = r12->length;
	r13 = 1;
	r11 = r11 - r13;
	r14 = 2;
	r13 = r14 == 0 ? 0 : r11 % r14;
	r14 = 0;
	if( r13 != r14 ) goto label$2f9bd3c_3_95;
	--r11;
	label$2f9bd3c_3_95:
	if( r4 < r10 ) goto label$2f9bd3c_3_97;
	if( r11 >= r4 ) goto label$2f9bd3c_3_100;
	label$2f9bd3c_3_97:
	r13 = 0;
	r15 = (float)r13;
	goto label$2f9bd3c_3_104;
	label$2f9bd3c_3_100:
	r12 = r0->data;
	if( r12 == NULL ) hl_null_access();
	r16 = r12->self;
	r15 = hl_kore_float32array_get(r16,r4);
	label$2f9bd3c_3_104:
	if( r5 < r10 ) goto label$2f9bd3c_3_106;
	if( r11 >= r5 ) goto label$2f9bd3c_3_109;
	label$2f9bd3c_3_106:
	r13 = 0;
	r17 = (float)r13;
	goto label$2f9bd3c_3_113;
	label$2f9bd3c_3_109:
	r12 = r0->data;
	if( r12 == NULL ) hl_null_access();
	r16 = r12->self;
	r17 = hl_kore_float32array_get(r16,r5);
	label$2f9bd3c_3_113:
	r13 = hl_math_floor(r7);
	r9 = (double)r13;
	r8 = r7 - r9;
	r9 = 1.;
	r9 = r9 - r8;
	r18 = (double)r15;
	r9 = r9 * r18;
	r19 = (double)r17;
	r18 = r8 * r19;
	r9 = r9 + r18;
	return r9;
}

double kha_audio2_ResamplingAudioChannel_lerp(kha__audio2__ResamplingAudioChannel r0,double r1,double r2,double r3) {
	double r4, r5;
	r4 = 1.;
	r4 = r4 - r3;
	r4 = r4 * r1;
	r5 = r3 * r2;
	r4 = r4 + r5;
	return r4;
}

int kha_audio2_ResamplingAudioChannel_sampleLength(kha__audio2__ResamplingAudioChannel r0,int r1) {
	kha__arrays__Float32ArrayPrivate r4;
	double r3, r5, r6;
	int r2, r7, r8;
	r4 = r0->data;
	if( r4 == NULL ) hl_null_access();
	r2 = r4->length;
	r3 = (double)r2;
	r5 = (double)r1;
	r2 = r0->sampleRate;
	r6 = (double)r2;
	r5 = r5 / r6;
	r3 = r3 * r5;
	r2 = hl_math_ceil(r3);
	r8 = 2;
	r7 = r8 == 0 ? 0 : r2 % r8;
	r8 = 0;
	if( r7 != r8 ) goto label$2f9bd3c_5_15;
	return r2;
	label$2f9bd3c_5_15:
	r8 = 1;
	r7 = r2 + r8;
	return r7;
}

void kha_audio2_ResamplingAudioChannel_play(kha__audio2__ResamplingAudioChannel r0) {
	bool r1;
	r1 = false;
	r0->paused = r1;
	r1 = false;
	r0->stopped = r1;
	kha_audio2_Audio1__playAgain(((kha__audio2__AudioChannel)r0));
	return;
}

void kha_audio2_ResamplingAudioChannel_pause(kha__audio2__ResamplingAudioChannel r0) {
	bool r1;
	r1 = true;
	r0->paused = r1;
	return;
}

void kha_audio2_ResamplingAudioChannel_stop(kha__audio2__ResamplingAudioChannel r0) {
	bool r2;
	int r1;
	r1 = 0;
	r0->myPosition = r1;
	r2 = true;
	r0->stopped = r2;
	return;
}

double kha_audio2_ResamplingAudioChannel_get_length(kha__audio2__ResamplingAudioChannel r0) {
	kha__arrays__Float32ArrayPrivate r3;
	double r1, r4;
	int r2;
	r3 = r0->data;
	if( r3 == NULL ) hl_null_access();
	r2 = r3->length;
	r1 = (double)r2;
	r2 = r0->sampleRate;
	r4 = (double)r2;
	r1 = r1 / r4;
	r4 = 2.;
	r1 = r1 / r4;
	return r1;
}

double kha_audio2_ResamplingAudioChannel_get_position(kha__audio2__ResamplingAudioChannel r0) {
	kha__audio2__$Audio r3;
	double r1, r4;
	int r2;
	r2 = r0->myPosition;
	r1 = (double)r2;
	r3 = (kha__audio2__$Audio)g$_kha_audio2_Audio;
	r2 = r3->samplesPerSecond;
	r4 = (double)r2;
	r1 = r1 / r4;
	r4 = 2.;
	r1 = r1 / r4;
	return r1;
}

double kha_audio2_ResamplingAudioChannel_set_position(kha__audio2__ResamplingAudioChannel r0,double r1) {
	kha__audio2__$Audio r4;
	kha__arrays__Float32ArrayPrivate r8;
	double r3, r5, r9;
	int r2, r6, r7, r10, r11, r12;
	r4 = (kha__audio2__$Audio)g$_kha_audio2_Audio;
	r2 = r4->samplesPerSecond;
	r5 = (double)r2;
	r3 = r1 * r5;
	r5 = 2.;
	r3 = r3 * r5;
	r2 = hl_math_round(r3);
	r7 = 2;
	r6 = r7 == 0 ? 0 : r2 % r7;
	r7 = 0;
	if( r6 == r7 ) goto label$2f9bd3c_11_12;
	++r2;
	label$2f9bd3c_11_12:
	r8 = r0->data;
	if( r8 == NULL ) hl_null_access();
	r6 = r8->length;
	r3 = (double)r6;
	r4 = (kha__audio2__$Audio)g$_kha_audio2_Audio;
	r6 = r4->samplesPerSecond;
	r5 = (double)r6;
	r6 = r0->sampleRate;
	r9 = (double)r6;
	r5 = r5 / r9;
	r3 = r3 * r5;
	r6 = hl_math_ceil(r3);
	r10 = 2;
	r7 = r10 == 0 ? 0 : r6 % r10;
	r10 = 0;
	if( r7 != r10 ) goto label$2f9bd3c_11_30;
	r7 = r6;
	goto label$2f9bd3c_11_32;
	label$2f9bd3c_11_30:
	r10 = 1;
	r7 = r6 + r10;
	label$2f9bd3c_11_32:
	if( r2 >= r7 ) goto label$2f9bd3c_11_35;
	r10 = r2;
	goto label$2f9bd3c_11_36;
	label$2f9bd3c_11_35:
	r10 = r7;
	label$2f9bd3c_11_36:
	r12 = 0;
	if( r12 >= r10 ) goto label$2f9bd3c_11_40;
	r11 = r10;
	goto label$2f9bd3c_11_41;
	label$2f9bd3c_11_40:
	r11 = 0;
	label$2f9bd3c_11_41:
	r0->myPosition = r11;
	return r1;
}

double kha_audio2_ResamplingAudioChannel_get_volume(kha__audio2__ResamplingAudioChannel r0) {
	double r1;
	r1 = r0->myVolume;
	return r1;
}

double kha_audio2_ResamplingAudioChannel_set_volume(kha__audio2__ResamplingAudioChannel r0,double r1) {
	r0->myVolume = r1;
	return r1;
}

bool kha_audio2_ResamplingAudioChannel_get_finished(kha__audio2__ResamplingAudioChannel r0) {
	bool r1;
	r1 = r0->stopped;
	return r1;
}

int kha_audio2_ResamplingAudioChannel_max(int r0,int r1) {
	if( r1 >= r0 ) goto label$2f9bd3c_15_2;
	return r0;
	label$2f9bd3c_15_2:
	return r1;
}

int kha_audio2_ResamplingAudioChannel_min(int r0,int r1) {
	if( r0 >= r1 ) goto label$2f9bd3c_16_2;
	return r0;
	label$2f9bd3c_16_2:
	return r1;
}

