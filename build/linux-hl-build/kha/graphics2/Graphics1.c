// Generated by HLC 4.1.3 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <kha/graphics2/Graphics1.h>
int kha_Image_get_realWidth(kha__Image);
extern hl_type t$fun_4dc72d5;
int kha_Image_get_realHeight(kha__Image);
extern hl_type t$_i32;
kha__Image kha_Image_create(int,int,vdynamic*,vdynamic*);
haxe__io__Bytes kha_Image_lock(kha__Image,int*);
void kha_Image_unlock(kha__Image);
extern hl_type t$fun_6212bcb;
int kha_Image_get_stride(kha__Image);
void haxe_io_Bytes_setInt32(haxe__io__Bytes,int,int);

void kha_graphics2_Graphics1_new(kha__graphics2__Graphics1 r0,vvirtual* r1) {
	r0->canvas = r1;
	return;
}

void kha_graphics2_Graphics1_begin(kha__graphics2__Graphics1 r0) {
	kha__Image r2;
	vvirtual *r5;
	haxe__io__Bytes r9;
	int *r10;
	vdynamic *r7, *r8;
	int r3, r4, r6;
	r2 = r0->texture;
	if( !r2 ) goto label$0f0b003_2_16;
	r2 = r0->texture;
	if( r2 == NULL ) hl_null_access();
	r3 = kha_Image_get_realWidth(r2);
	r5 = r0->canvas;
	if( r5 == NULL ) hl_null_access();
	if( hl_vfields(r5)[2] ) r4 = ((int (*)(vdynamic*))hl_vfields(r5)[2])(r5->value); else {
		vdynamic ret;
		hl_dyn_call_obj(r5->value,&t$fun_4dc72d5,235672157/*get_width*/,NULL,&ret);
		r4 = (int)ret.v.i;
	}
	if( r3 != r4 ) goto label$0f0b003_2_16;
	r2 = r0->texture;
	if( r2 == NULL ) hl_null_access();
	r3 = kha_Image_get_realHeight(r2);
	r5 = r0->canvas;
	if( r5 == NULL ) hl_null_access();
	if( hl_vfields(r5)[3] ) r4 = ((int (*)(vdynamic*))hl_vfields(r5)[3])(r5->value); else {
		vdynamic ret;
		hl_dyn_call_obj(r5->value,&t$fun_4dc72d5,-221022288/*get_height*/,NULL,&ret);
		r4 = (int)ret.v.i;
	}
	if( r3 == r4 ) goto label$0f0b003_2_28;
	label$0f0b003_2_16:
	r5 = r0->canvas;
	if( r5 == NULL ) hl_null_access();
	if( hl_vfields(r5)[2] ) r3 = ((int (*)(vdynamic*))hl_vfields(r5)[2])(r5->value); else {
		vdynamic ret;
		hl_dyn_call_obj(r5->value,&t$fun_4dc72d5,235672157/*get_width*/,NULL,&ret);
		r3 = (int)ret.v.i;
	}
	r5 = r0->canvas;
	if( r5 == NULL ) hl_null_access();
	if( hl_vfields(r5)[3] ) r4 = ((int (*)(vdynamic*))hl_vfields(r5)[3])(r5->value); else {
		vdynamic ret;
		hl_dyn_call_obj(r5->value,&t$fun_4dc72d5,-221022288/*get_height*/,NULL,&ret);
		r4 = (int)ret.v.i;
	}
	r6 = 0;
	r7 = hl_alloc_dynamic(&t$_i32);
	r7->v.i = r6;
	r6 = 2;
	r8 = hl_alloc_dynamic(&t$_i32);
	r8->v.i = r6;
	r2 = kha_Image_create(r3,r4,r7,r8);
	r0->texture = r2;
	label$0f0b003_2_28:
	r2 = r0->texture;
	if( r2 == NULL ) hl_null_access();
	r10 = NULL;
	r9 = kha_Image_lock(r2,r10);
	r0->pixels = r9;
	return;
}

void kha_graphics2_Graphics1_end(kha__graphics2__Graphics1 r0) {
	bool *r6;
	kha__Image r2;
	vvirtual *r4;
	bool r5;
	kha__graphics2__Graphics r3;
	float r9, r10;
	vdynamic *r7;
	int r8;
	r2 = r0->texture;
	if( r2 == NULL ) hl_null_access();
	kha_Image_unlock(r2);
	r4 = r0->canvas;
	if( r4 == NULL ) hl_null_access();
	if( hl_vfields(r4)[5] ) r3 = ((kha__graphics2__Graphics (*)(vdynamic*))hl_vfields(r4)[5])(r4->value); else {
		r3 = (kha__graphics2__Graphics)hl_dyn_call_obj(r4->value,&t$fun_6212bcb,-483397590/*get_g2*/,NULL,NULL);
	}
	if( r3 == NULL ) hl_null_access();
	r5 = false;
	r6 = &r5;
	r7 = NULL;
	((void (*)(kha__graphics2__Graphics,bool*,vdynamic*))r3->$type->vobj_proto[0])(r3,r6,r7);
	r4 = r0->canvas;
	if( r4 == NULL ) hl_null_access();
	if( hl_vfields(r4)[5] ) r3 = ((kha__graphics2__Graphics (*)(vdynamic*))hl_vfields(r4)[5])(r4->value); else {
		r3 = (kha__graphics2__Graphics)hl_dyn_call_obj(r4->value,&t$fun_6212bcb,-483397590/*get_g2*/,NULL,NULL);
	}
	if( r3 == NULL ) hl_null_access();
	r2 = r0->texture;
	r8 = 0;
	r9 = (float)r8;
	r8 = 0;
	r10 = (float)r8;
	((void (*)(kha__graphics2__Graphics,kha__Image,float,float))r3->$type->vobj_proto[4])(r3,r2,r9,r10);
	r4 = r0->canvas;
	if( r4 == NULL ) hl_null_access();
	if( hl_vfields(r4)[5] ) r3 = ((kha__graphics2__Graphics (*)(vdynamic*))hl_vfields(r4)[5])(r4->value); else {
		r3 = (kha__graphics2__Graphics)hl_dyn_call_obj(r4->value,&t$fun_6212bcb,-483397590/*get_g2*/,NULL,NULL);
	}
	if( r3 == NULL ) hl_null_access();
	((void (*)(kha__graphics2__Graphics))r3->$type->vobj_proto[1])(r3);
	return;
}

void kha_graphics2_Graphics1_setPixel(kha__graphics2__Graphics1 r0,int r1,int r2,int r3) {
	kha__Image r8;
	haxe__io__Bytes r5;
	int r6, r7, r9;
	r5 = r0->pixels;
	if( r5 == NULL ) hl_null_access();
	r8 = r0->texture;
	if( r8 == NULL ) hl_null_access();
	r7 = kha_Image_get_stride(r8);
	r6 = r2 * r7;
	r9 = 4;
	r7 = r1 * r9;
	r6 = r6 + r7;
	haxe_io_Bytes_setInt32(r5,r6,r3);
	return;
}

