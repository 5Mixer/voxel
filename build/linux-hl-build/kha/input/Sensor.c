// Generated by HLC 4.1.3 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <kha/input/Sensor.h>
extern hl_type t$hl_types_ArrayObj;
void hl_types_ArrayObj_new(hl__types__ArrayObj);
extern kha__input__$Sensor g$_kha_input_Sensor;
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);

void kha_input_Sensor_new(kha__input__Sensor r0) {
	hl__types__ArrayObj r1;
	r1 = (hl__types__ArrayObj)hl_alloc_obj(&t$hl_types_ArrayObj);
	hl_types_ArrayObj_new(r1);
	r0->listeners = r1;
	return;
}

kha__input__Sensor kha_input_Sensor_get(int r0) {
	kha__input__$Sensor r2;
	kha__input__Sensor r1;
	switch(r0) {
		default:
			goto label$ba74e21_2_8;
		case 0:
			r2 = (kha__input__$Sensor)g$_kha_input_Sensor;
			r1 = r2->accelerometer;
			return r1;
		case 1:
			r2 = (kha__input__$Sensor)g$_kha_input_Sensor;
			r1 = r2->gyroscope;
			return r1;
	}
	label$ba74e21_2_8:
	r1 = NULL;
	return r1;
}

void kha_input_Sensor_notify(kha__input__Sensor r0,vclosure* r1) {
	hl__types__ArrayObj r3;
	int r2;
	r3 = r0->listeners;
	if( r3 == NULL ) hl_null_access();
	r2 = hl_types_ArrayObj_push(r3,((vdynamic*)r1));
	return;
}

void kha_input_Sensor__accelerometerChanged(double r0,double r1,double r2) {
	hl__types__ArrayObj r6;
	kha__input__Sensor r3;
	vclosure *r8;
	vdynamic *r9;
	varray *r10;
	int r4, r7;
	r4 = 0;
	r3 = kha_input_Sensor_get(r4);
	r4 = 0;
	if( r3 == NULL ) hl_null_access();
	r6 = r3->listeners;
	label$ba74e21_4_5:
	if( r6 == NULL ) hl_null_access();
	r7 = r6->length;
	if( r4 >= r7 ) goto label$ba74e21_4_20;
	r7 = r6->length;
	if( ((unsigned)r4) < ((unsigned)r7) ) goto label$ba74e21_4_13;
	r8 = NULL;
	goto label$ba74e21_4_16;
	label$ba74e21_4_13:
	r10 = r6->array;
	r9 = ((vdynamic**)(r10 + 1))[r4];
	r8 = (vclosure*)r9;
	label$ba74e21_4_16:
	++r4;
	if( r8 == NULL ) hl_null_access();
	r8->hasValue ? ((void (*)(vdynamic*,double,double,double))r8->fun)((vdynamic*)r8->value,r0,r1,r2) : ((void (*)(double,double,double))r8->fun)(r0,r1,r2);
	goto label$ba74e21_4_5;
	label$ba74e21_4_20:
	return;
}

void kha_input_Sensor__gyroscopeChanged(double r0,double r1,double r2) {
	hl__types__ArrayObj r6;
	kha__input__Sensor r3;
	vclosure *r8;
	vdynamic *r9;
	varray *r10;
	int r4, r7;
	r4 = 1;
	r3 = kha_input_Sensor_get(r4);
	r4 = 0;
	if( r3 == NULL ) hl_null_access();
	r6 = r3->listeners;
	label$ba74e21_5_5:
	if( r6 == NULL ) hl_null_access();
	r7 = r6->length;
	if( r4 >= r7 ) goto label$ba74e21_5_20;
	r7 = r6->length;
	if( ((unsigned)r4) < ((unsigned)r7) ) goto label$ba74e21_5_13;
	r8 = NULL;
	goto label$ba74e21_5_16;
	label$ba74e21_5_13:
	r10 = r6->array;
	r9 = ((vdynamic**)(r10 + 1))[r4];
	r8 = (vclosure*)r9;
	label$ba74e21_5_16:
	++r4;
	if( r8 == NULL ) hl_null_access();
	r8->hasValue ? ((void (*)(vdynamic*,double,double,double))r8->fun)((vdynamic*)r8->value,r0,r1,r2) : ((void (*)(double,double,double))r8->fun)(r0,r1,r2);
	goto label$ba74e21_5_5;
	label$ba74e21_5_20:
	return;
}

