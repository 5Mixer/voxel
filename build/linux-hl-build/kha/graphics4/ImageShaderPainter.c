// Generated by HLC 4.1.3 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <kha/graphics4/ImageShaderPainter.h>
extern kha__graphics4__$ImageShaderPainter g$a0efbdf;
#include <kha/graphics4/PerFramebufferPipelineCache.h>
kha__graphics4__VertexStructure kha_graphics4_Graphics2_createImageVertexStructure(void);
kha__graphics4__PipelineState kha_graphics4_Graphics2_createImagePipeline(kha__graphics4__VertexStructure);
extern hl_type t$kha_graphics4_PerFramebufferPipelineCache;
void kha_graphics4_PerFramebufferPipelineCache_new(kha__graphics4__PerFramebufferPipelineCache,kha__graphics4__PipelineState,bool);
extern hl_type t$vrt_39c470b;
#include <kha/arrays/Uint32ArrayPrivate.h>
extern hl_type t$kha_graphics4_VertexBuffer;
void kha_graphics4_VertexBuffer_new(kha__graphics4__VertexBuffer,int,kha__graphics4__VertexStructure,int,int*,bool*);
kha__arrays__Float32ArrayPrivate kha_graphics4_VertexBuffer_lock(kha__graphics4__VertexBuffer,vdynamic*,vdynamic*);
extern hl_type t$kha_graphics4_IndexBuffer;
void kha_graphics4_IndexBuffer_new(kha__graphics4__IndexBuffer,int,int,bool*);
kha__arrays__Uint32ArrayPrivate kha_graphics4_IndexBuffer_lock(kha__graphics4__IndexBuffer,vdynamic*,vdynamic*);
#include <hl/natives.h>
void kha_graphics4_IndexBuffer_unlock(kha__graphics4__IndexBuffer,vdynamic*);
extern hl_type t$_i32;
void kha_graphics4_VertexBuffer_unlock(kha__graphics4__VertexBuffer,vdynamic*);
extern hl_type t$fun_c881552;
extern hl_type t$fun_c80ec77;
extern hl_type t$fun_a561c62;
extern hl_type t$fun_46c6b6e;
extern hl_type t$fun_04e2896;
extern hl_type t$fun_4ad9aaa;
extern hl_type t$fun_896f717;
extern hl_type t$fun_8305be0;
int kha_Image_get_width(kha__Image);
int kha_Image_get_realWidth(kha__Image);
int kha_Image_get_height(kha__Image);
int kha_Image_get_realHeight(kha__Image);

vvirtual* kha_graphics4_ImageShaderPainter_get_pipeline(kha__graphics4__ImageShaderPainter r0) {
	vvirtual *r1;
	r1 = r0->myPipeline;
	return r1;
}

vvirtual* kha_graphics4_ImageShaderPainter_set_pipeline(kha__graphics4__ImageShaderPainter r0,vvirtual* r1) {
	vvirtual *r2;
	kha__graphics4__$ImageShaderPainter r3;
	if( !r1 ) goto label$b78fc65_2_3;
	r2 = r1;
	goto label$b78fc65_2_5;
	label$b78fc65_2_3:
	r3 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r2 = r3->standardImagePipeline;
	label$b78fc65_2_5:
	r0->myPipeline = r2;
	r2 = r0->myPipeline;
	return r2;
}

void kha_graphics4_ImageShaderPainter_setProjection(kha__graphics4__ImageShaderPainter r0,kha__math__FastMatrix4 r1) {
	r0->projectionMatrix = r1;
	return;
}

void kha_graphics4_ImageShaderPainter_initShaders() {
	kha__graphics4__PipelineState r4;
	vvirtual *r3;
	bool r6;
	kha__graphics4__$ImageShaderPainter r2;
	kha__graphics4__PerFramebufferPipelineCache r5;
	kha__graphics4__VertexStructure r1;
	r2 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r1 = r2->structure;
	if( r1 ) goto label$b78fc65_4_6;
	r1 = kha_graphics4_Graphics2_createImageVertexStructure();
	r2 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r2->structure = r1;
	label$b78fc65_4_6:
	r2 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r3 = r2->standardImagePipeline;
	if( r3 ) goto label$b78fc65_4_24;
	r2 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r1 = r2->structure;
	r4 = kha_graphics4_Graphics2_createImagePipeline(r1);
	r5 = (kha__graphics4__PerFramebufferPipelineCache)hl_alloc_obj(&t$kha_graphics4_PerFramebufferPipelineCache);
	r6 = true;
	kha_graphics4_PerFramebufferPipelineCache_new(r5,r4,r6);
	if( r5 ) goto label$b78fc65_4_18;
	r3 = NULL;
	goto label$b78fc65_4_22;
	label$b78fc65_4_18:
	r3 = r5->f$1;
	if( r3 ) goto label$b78fc65_4_22;
	r3 = hl_to_virtual(&t$vrt_39c470b,(vdynamic*)r5);
	r5->f$1 = r3;
	label$b78fc65_4_22:
	r2 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r2->standardImagePipeline = r3;
	label$b78fc65_4_24:
	return;
}

void kha_graphics4_ImageShaderPainter_initBuffers(kha__graphics4__ImageShaderPainter r0) {
	bool *r8;
	kha__graphics4__VertexBuffer r2;
	kha__graphics4__IndexBuffer r12;
	kha__graphics4__$ImageShaderPainter r3;
	kha__arrays__Float32ArrayPrivate r9;
	kha__arrays__Uint32ArrayPrivate r13;
	vdynamic *r10, *r11;
	int *r7;
	vbyte *r16;
	kha__graphics4__VertexStructure r5;
	int r4, r6, r14, r15, r17;
	r3 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r2 = r3->rectVertexBuffer;
	if( r2 ) goto label$b78fc65_5_113;
	r2 = (kha__graphics4__VertexBuffer)hl_alloc_obj(&t$kha_graphics4_VertexBuffer);
	r4 = 6000;
	r3 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r5 = r3->structure;
	r6 = 1;
	r7 = NULL;
	r8 = NULL;
	kha_graphics4_VertexBuffer_new(r2,r4,r5,r6,r7,r8);
	r3 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r3->rectVertexBuffer = r2;
	r3 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r2 = r3->rectVertexBuffer;
	if( r2 == NULL ) hl_null_access();
	r10 = NULL;
	r11 = NULL;
	r9 = kha_graphics4_VertexBuffer_lock(r2,r10,r11);
	r3 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r3->rectVertices = r9;
	r12 = (kha__graphics4__IndexBuffer)hl_alloc_obj(&t$kha_graphics4_IndexBuffer);
	r4 = 9000;
	r6 = 0;
	r8 = NULL;
	kha_graphics4_IndexBuffer_new(r12,r4,r6,r8);
	r3 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r3->indexBuffer = r12;
	r3 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r12 = r3->indexBuffer;
	if( r12 == NULL ) hl_null_access();
	r10 = NULL;
	r11 = NULL;
	r13 = kha_graphics4_IndexBuffer_lock(r12,r10,r11);
	r4 = 0;
	label$b78fc65_5_35:
	r14 = 1500;
	if( r4 >= r14 ) goto label$b78fc65_5_108;
	r6 = r4;
	++r4;
	r15 = 4;
	r14 = r6 * r15;
	if( r13 == NULL ) hl_null_access();
	r16 = r13->self;
	r17 = 3;
	r15 = r6 * r17;
	r17 = 2;
	r15 = r15 * r17;
	hl_kore_uint32array_set(r16,r15,r14);
	r15 = 4;
	r14 = r6 * r15;
	r15 = 1;
	r14 = r14 + r15;
	r16 = r13->self;
	r17 = 3;
	r15 = r6 * r17;
	r17 = 2;
	r15 = r15 * r17;
	r17 = 1;
	r15 = r15 + r17;
	hl_kore_uint32array_set(r16,r15,r14);
	r15 = 4;
	r14 = r6 * r15;
	r15 = 2;
	r14 = r14 + r15;
	r16 = r13->self;
	r17 = 3;
	r15 = r6 * r17;
	r17 = 2;
	r15 = r15 * r17;
	r17 = 2;
	r15 = r15 + r17;
	hl_kore_uint32array_set(r16,r15,r14);
	r15 = 4;
	r14 = r6 * r15;
	r16 = r13->self;
	r17 = 3;
	r15 = r6 * r17;
	r17 = 2;
	r15 = r15 * r17;
	r17 = 3;
	r15 = r15 + r17;
	hl_kore_uint32array_set(r16,r15,r14);
	r15 = 4;
	r14 = r6 * r15;
	r15 = 2;
	r14 = r14 + r15;
	r16 = r13->self;
	r17 = 3;
	r15 = r6 * r17;
	r17 = 2;
	r15 = r15 * r17;
	r17 = 4;
	r15 = r15 + r17;
	hl_kore_uint32array_set(r16,r15,r14);
	r15 = 4;
	r14 = r6 * r15;
	r15 = 3;
	r14 = r14 + r15;
	r16 = r13->self;
	r17 = 3;
	r15 = r6 * r17;
	r17 = 2;
	r15 = r15 * r17;
	r17 = 5;
	r15 = r15 + r17;
	hl_kore_uint32array_set(r16,r15,r14);
	goto label$b78fc65_5_35;
	label$b78fc65_5_108:
	r3 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r12 = r3->indexBuffer;
	if( r12 == NULL ) hl_null_access();
	r10 = NULL;
	kha_graphics4_IndexBuffer_unlock(r12,r10);
	label$b78fc65_5_113:
	return;
}

void kha_graphics4_ImageShaderPainter_setRectVertices(kha__graphics4__ImageShaderPainter r0,float r1,float r2,float r3,float r4,float r5,float r6,float r7,float r8) {
	kha__graphics4__$ImageShaderPainter r10;
	float r15;
	kha__arrays__Float32ArrayPrivate r14;
	double r17;
	vbyte *r13;
	int r9, r11, r16;
	r10 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r9 = r10->bufferIndex;
	r10 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r11 = r10->bufferStart;
	r9 = r9 - r11;
	r11 = 9;
	r9 = r9 * r11;
	r11 = 4;
	r9 = r9 * r11;
	r10 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r14 = r10->rectVertices;
	if( r14 == NULL ) hl_null_access();
	r13 = r14->self;
	hl_kore_float32array_set(r13,r9,r1);
	r10 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r14 = r10->rectVertices;
	if( r14 == NULL ) hl_null_access();
	r13 = r14->self;
	r16 = 1;
	r11 = r9 + r16;
	hl_kore_float32array_set(r13,r11,r2);
	r10 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r14 = r10->rectVertices;
	if( r14 == NULL ) hl_null_access();
	r13 = r14->self;
	r16 = 2;
	r11 = r9 + r16;
	r17 = -5.;
	r15 = (float)r17;
	hl_kore_float32array_set(r13,r11,r15);
	r10 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r14 = r10->rectVertices;
	if( r14 == NULL ) hl_null_access();
	r13 = r14->self;
	r16 = 9;
	r11 = r9 + r16;
	hl_kore_float32array_set(r13,r11,r3);
	r10 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r14 = r10->rectVertices;
	if( r14 == NULL ) hl_null_access();
	r13 = r14->self;
	r16 = 10;
	r11 = r9 + r16;
	hl_kore_float32array_set(r13,r11,r4);
	r10 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r14 = r10->rectVertices;
	if( r14 == NULL ) hl_null_access();
	r13 = r14->self;
	r16 = 11;
	r11 = r9 + r16;
	r17 = -5.;
	r15 = (float)r17;
	hl_kore_float32array_set(r13,r11,r15);
	r10 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r14 = r10->rectVertices;
	if( r14 == NULL ) hl_null_access();
	r13 = r14->self;
	r16 = 18;
	r11 = r9 + r16;
	hl_kore_float32array_set(r13,r11,r5);
	r10 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r14 = r10->rectVertices;
	if( r14 == NULL ) hl_null_access();
	r13 = r14->self;
	r16 = 19;
	r11 = r9 + r16;
	hl_kore_float32array_set(r13,r11,r6);
	r10 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r14 = r10->rectVertices;
	if( r14 == NULL ) hl_null_access();
	r13 = r14->self;
	r16 = 20;
	r11 = r9 + r16;
	r17 = -5.;
	r15 = (float)r17;
	hl_kore_float32array_set(r13,r11,r15);
	r10 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r14 = r10->rectVertices;
	if( r14 == NULL ) hl_null_access();
	r13 = r14->self;
	r16 = 27;
	r11 = r9 + r16;
	hl_kore_float32array_set(r13,r11,r7);
	r10 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r14 = r10->rectVertices;
	if( r14 == NULL ) hl_null_access();
	r13 = r14->self;
	r16 = 28;
	r11 = r9 + r16;
	hl_kore_float32array_set(r13,r11,r8);
	r10 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r14 = r10->rectVertices;
	if( r14 == NULL ) hl_null_access();
	r13 = r14->self;
	r16 = 29;
	r11 = r9 + r16;
	r17 = -5.;
	r15 = (float)r17;
	hl_kore_float32array_set(r13,r11,r15);
	return;
}

void kha_graphics4_ImageShaderPainter_setRectTexCoords(kha__graphics4__ImageShaderPainter r0,float r1,float r2,float r3,float r4) {
	kha__graphics4__$ImageShaderPainter r6;
	kha__arrays__Float32ArrayPrivate r10;
	vbyte *r9;
	int r5, r7, r11;
	r6 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r5 = r6->bufferIndex;
	r6 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r7 = r6->bufferStart;
	r5 = r5 - r7;
	r7 = 9;
	r5 = r5 * r7;
	r7 = 4;
	r5 = r5 * r7;
	r6 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r10 = r6->rectVertices;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->self;
	r11 = 3;
	r7 = r5 + r11;
	hl_kore_float32array_set(r9,r7,r1);
	r6 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r10 = r6->rectVertices;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->self;
	r11 = 4;
	r7 = r5 + r11;
	hl_kore_float32array_set(r9,r7,r4);
	r6 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r10 = r6->rectVertices;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->self;
	r11 = 12;
	r7 = r5 + r11;
	hl_kore_float32array_set(r9,r7,r1);
	r6 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r10 = r6->rectVertices;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->self;
	r11 = 13;
	r7 = r5 + r11;
	hl_kore_float32array_set(r9,r7,r2);
	r6 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r10 = r6->rectVertices;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->self;
	r11 = 21;
	r7 = r5 + r11;
	hl_kore_float32array_set(r9,r7,r3);
	r6 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r10 = r6->rectVertices;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->self;
	r11 = 22;
	r7 = r5 + r11;
	hl_kore_float32array_set(r9,r7,r2);
	r6 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r10 = r6->rectVertices;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->self;
	r11 = 30;
	r7 = r5 + r11;
	hl_kore_float32array_set(r9,r7,r3);
	r6 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r10 = r6->rectVertices;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->self;
	r11 = 31;
	r7 = r5 + r11;
	hl_kore_float32array_set(r9,r7,r4);
	return;
}

void kha_graphics4_ImageShaderPainter_setRectColor(kha__graphics4__ImageShaderPainter r0,float r1,float r2,float r3,float r4) {
	kha__graphics4__$ImageShaderPainter r6;
	kha__arrays__Float32ArrayPrivate r10;
	vbyte *r9;
	int r5, r7, r11;
	r6 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r5 = r6->bufferIndex;
	r6 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r7 = r6->bufferStart;
	r5 = r5 - r7;
	r7 = 9;
	r5 = r5 * r7;
	r7 = 4;
	r5 = r5 * r7;
	r6 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r10 = r6->rectVertices;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->self;
	r11 = 5;
	r7 = r5 + r11;
	hl_kore_float32array_set(r9,r7,r1);
	r6 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r10 = r6->rectVertices;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->self;
	r11 = 6;
	r7 = r5 + r11;
	hl_kore_float32array_set(r9,r7,r2);
	r6 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r10 = r6->rectVertices;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->self;
	r11 = 7;
	r7 = r5 + r11;
	hl_kore_float32array_set(r9,r7,r3);
	r6 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r10 = r6->rectVertices;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->self;
	r11 = 8;
	r7 = r5 + r11;
	hl_kore_float32array_set(r9,r7,r4);
	r6 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r10 = r6->rectVertices;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->self;
	r11 = 14;
	r7 = r5 + r11;
	hl_kore_float32array_set(r9,r7,r1);
	r6 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r10 = r6->rectVertices;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->self;
	r11 = 15;
	r7 = r5 + r11;
	hl_kore_float32array_set(r9,r7,r2);
	r6 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r10 = r6->rectVertices;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->self;
	r11 = 16;
	r7 = r5 + r11;
	hl_kore_float32array_set(r9,r7,r3);
	r6 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r10 = r6->rectVertices;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->self;
	r11 = 17;
	r7 = r5 + r11;
	hl_kore_float32array_set(r9,r7,r4);
	r6 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r10 = r6->rectVertices;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->self;
	r11 = 23;
	r7 = r5 + r11;
	hl_kore_float32array_set(r9,r7,r1);
	r6 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r10 = r6->rectVertices;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->self;
	r11 = 24;
	r7 = r5 + r11;
	hl_kore_float32array_set(r9,r7,r2);
	r6 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r10 = r6->rectVertices;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->self;
	r11 = 25;
	r7 = r5 + r11;
	hl_kore_float32array_set(r9,r7,r3);
	r6 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r10 = r6->rectVertices;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->self;
	r11 = 26;
	r7 = r5 + r11;
	hl_kore_float32array_set(r9,r7,r4);
	r6 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r10 = r6->rectVertices;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->self;
	r11 = 32;
	r7 = r5 + r11;
	hl_kore_float32array_set(r9,r7,r1);
	r6 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r10 = r6->rectVertices;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->self;
	r11 = 33;
	r7 = r5 + r11;
	hl_kore_float32array_set(r9,r7,r2);
	r6 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r10 = r6->rectVertices;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->self;
	r11 = 34;
	r7 = r5 + r11;
	hl_kore_float32array_set(r9,r7,r3);
	r6 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r10 = r6->rectVertices;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->self;
	r11 = 35;
	r7 = r5 + r11;
	hl_kore_float32array_set(r9,r7,r4);
	return;
}

void kha_graphics4_ImageShaderPainter_drawBuffer(kha__graphics4__ImageShaderPainter r0,bool r1) {
	kha__Image r15;
	kha__graphics4__PipelineState r12;
	vvirtual *r9, *r11, *r14;
	kha__math__FastMatrix4 r20;
	bool r17;
	hl__types__ArrayBytes_Int r10;
	kha__graphics4__VertexBuffer r6;
	kha__graphics4__IndexBuffer r13;
	kha__graphics4__InternalPipeline r8;
	kha__graphics4__$ImageShaderPainter r4;
	kha__arrays__Float32ArrayPrivate r23;
	int *r21, *r22;
	vdynamic *r7, *r24;
	int r3, r5, r16, r18, r19;
	r4 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r3 = r4->bufferIndex;
	r4 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r5 = r4->bufferStart;
	r3 = r3 - r5;
	r5 = 0;
	if( r3 != r5 ) goto label$b78fc65_9_8;
	return;
	label$b78fc65_9_8:
	r4 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r6 = r4->rectVertexBuffer;
	if( r6 == NULL ) hl_null_access();
	r4 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r3 = r4->bufferIndex;
	r4 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r5 = r4->bufferStart;
	r3 = r3 - r5;
	r5 = 4;
	r3 = r3 * r5;
	r7 = hl_alloc_dynamic(&t$_i32);
	r7->v.i = r3;
	kha_graphics4_VertexBuffer_unlock(r6,r7);
	r9 = r0->myPipeline;
	if( r9 == NULL ) hl_null_access();
	r10 = NULL;
	r3 = 3;
	if( hl_vfields(r9)[0] ) r8 = ((kha__graphics4__InternalPipeline (*)(vdynamic*,hl__types__ArrayBytes_Int,int))hl_vfields(r9)[0])(r9->value,r10,r3); else {
		void *args[] = {r10,&r3};
		r8 = (kha__graphics4__InternalPipeline)hl_dyn_call_obj(r9->value,&t$fun_c881552,5144726/*get*/,args,NULL);
	}
	r11 = r0->g;
	if( r11 == NULL ) hl_null_access();
	if( r8 == NULL ) hl_null_access();
	r12 = r8->pipeline;
	if( hl_vfields(r11)[15] ) ((void (*)(vdynamic*,kha__graphics4__PipelineState))hl_vfields(r11)[15])(r11->value,r12); else {
		void *args[] = {r12};
		hl_dyn_call_obj(r11->value,&t$fun_c80ec77,467961459/*setPipeline*/,args,NULL);
	}
	r11 = r0->g;
	if( r11 == NULL ) hl_null_access();
	r4 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r6 = r4->rectVertexBuffer;
	if( hl_vfields(r11)[4] ) ((void (*)(vdynamic*,kha__graphics4__VertexBuffer))hl_vfields(r11)[4])(r11->value,r6); else {
		void *args[] = {r6};
		hl_dyn_call_obj(r11->value,&t$fun_a561c62,-278953801/*setVertexBuffer*/,args,NULL);
	}
	r11 = r0->g;
	if( r11 == NULL ) hl_null_access();
	r4 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r13 = r4->indexBuffer;
	if( hl_vfields(r11)[23] ) ((void (*)(vdynamic*,kha__graphics4__IndexBuffer))hl_vfields(r11)[23])(r11->value,r13); else {
		void *args[] = {r13};
		hl_dyn_call_obj(r11->value,&t$fun_46c6b6e,-43737183/*setIndexBuffer*/,args,NULL);
	}
	r11 = r0->g;
	if( r11 == NULL ) hl_null_access();
	r14 = r8->textureLocation;
	r4 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r15 = r4->lastTexture;
	if( hl_vfields(r11)[13] ) ((void (*)(vdynamic*,vvirtual*,kha__Image))hl_vfields(r11)[13])(r11->value,r14,r15); else {
		void *args[] = {r14,r15};
		hl_dyn_call_obj(r11->value,&t$fun_04e2896,-239080103/*setTexture*/,args,NULL);
	}
	r11 = r0->g;
	if( r11 == NULL ) hl_null_access();
	r14 = r8->textureLocation;
	r3 = 2;
	r5 = 2;
	r17 = r0->bilinear;
	if( !r17 ) goto label$b78fc65_9_55;
	r16 = 1;
	goto label$b78fc65_9_56;
	label$b78fc65_9_55:
	r16 = 0;
	label$b78fc65_9_56:
	r17 = r0->bilinear;
	if( !r17 ) goto label$b78fc65_9_60;
	r18 = 1;
	goto label$b78fc65_9_61;
	label$b78fc65_9_60:
	r18 = 0;
	label$b78fc65_9_61:
	r17 = r0->bilinearMipmaps;
	if( !r17 ) goto label$b78fc65_9_65;
	r19 = 2;
	goto label$b78fc65_9_66;
	label$b78fc65_9_65:
	r19 = 0;
	label$b78fc65_9_66:
	if( hl_vfields(r11)[8] ) ((void (*)(vdynamic*,vvirtual*,int,int,int,int,int))hl_vfields(r11)[8])(r11->value,r14,r3,r5,r16,r18,r19); else {
		void *args[] = {r14,&r3,&r5,&r16,&r18,&r19};
		hl_dyn_call_obj(r11->value,&t$fun_4ad9aaa,357382632/*setTextureParameters*/,args,NULL);
	}
	r11 = r0->g;
	if( r11 == NULL ) hl_null_access();
	r14 = r8->projectionLocation;
	r20 = r0->projectionMatrix;
	if( hl_vfields(r11)[17] ) ((void (*)(vdynamic*,vvirtual*,kha__math__FastMatrix4))hl_vfields(r11)[17])(r11->value,r14,r20); else {
		void *args[] = {r14,r20};
		hl_dyn_call_obj(r11->value,&t$fun_896f717,460303235/*setMatrix*/,args,NULL);
	}
	r11 = r0->g;
	if( r11 == NULL ) hl_null_access();
	r4 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r3 = r4->bufferStart;
	r5 = 2;
	r3 = r3 * r5;
	r5 = 3;
	r3 = r3 * r5;
	r21 = &r3;
	r4 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r5 = r4->bufferIndex;
	r4 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r16 = r4->bufferStart;
	r5 = r5 - r16;
	r16 = 2;
	r5 = r5 * r16;
	r16 = 3;
	r5 = r5 * r16;
	r22 = &r5;
	if( hl_vfields(r11)[41] ) ((void (*)(vdynamic*,int*,int*))hl_vfields(r11)[41])(r11->value,r21,r22); else {
		void *args[] = {r21,r22};
		hl_dyn_call_obj(r11->value,&t$fun_8305be0,-519327652/*drawIndexedVertices*/,args,NULL);
	}
	r11 = r0->g;
	if( r11 == NULL ) hl_null_access();
	r14 = r8->textureLocation;
	r15 = NULL;
	if( hl_vfields(r11)[13] ) ((void (*)(vdynamic*,vvirtual*,kha__Image))hl_vfields(r11)[13])(r11->value,r14,r15); else {
		void *args[] = {r14,r15};
		hl_dyn_call_obj(r11->value,&t$fun_04e2896,-239080103/*setTexture*/,args,NULL);
	}
	if( r1 ) goto label$b78fc65_9_109;
	r4 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r16 = r4->bufferStart;
	r4 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r18 = r4->bufferIndex;
	r16 = r16 + r18;
	r18 = 1;
	r16 = r16 + r18;
	r18 = 4;
	r16 = r16 * r18;
	r18 = 1500;
	if( r16 < r18 ) goto label$b78fc65_9_125;
	label$b78fc65_9_109:
	r16 = 0;
	r4 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r4->bufferStart = r16;
	r16 = 0;
	r4 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r4->bufferIndex = r16;
	r4 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r6 = r4->rectVertexBuffer;
	if( r6 == NULL ) hl_null_access();
	r16 = 0;
	r7 = hl_alloc_dynamic(&t$_i32);
	r7->v.i = r16;
	r24 = NULL;
	r23 = kha_graphics4_VertexBuffer_lock(r6,r7,r24);
	r4 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r4->rectVertices = r23;
	goto label$b78fc65_9_141;
	label$b78fc65_9_125:
	r4 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r16 = r4->bufferIndex;
	r4 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r4->bufferStart = r16;
	r4 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r6 = r4->rectVertexBuffer;
	if( r6 == NULL ) hl_null_access();
	r4 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r16 = r4->bufferStart;
	r18 = 4;
	r16 = r16 * r18;
	r7 = hl_alloc_dynamic(&t$_i32);
	r7->v.i = r16;
	r24 = NULL;
	r23 = kha_graphics4_VertexBuffer_lock(r6,r7,r24);
	r4 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r4->rectVertices = r23;
	label$b78fc65_9_141:
	return;
}

void kha_graphics4_ImageShaderPainter_setBilinearFilter(kha__graphics4__ImageShaderPainter r0,bool r1) {
	kha__Image r4;
	bool r3;
	kha__graphics4__$ImageShaderPainter r5;
	r3 = false;
	kha_graphics4_ImageShaderPainter_drawBuffer(r0,r3);
	r4 = NULL;
	r5 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r5->lastTexture = r4;
	r0->bilinear = r1;
	return;
}

void kha_graphics4_ImageShaderPainter_setBilinearMipmapFilter(kha__graphics4__ImageShaderPainter r0,bool r1) {
	kha__Image r4;
	bool r3;
	kha__graphics4__$ImageShaderPainter r5;
	r3 = false;
	kha_graphics4_ImageShaderPainter_drawBuffer(r0,r3);
	r4 = NULL;
	r5 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r5->lastTexture = r4;
	r0->bilinearMipmaps = r1;
	return;
}

void kha_graphics4_ImageShaderPainter_drawImage(kha__graphics4__ImageShaderPainter r0,kha__Image r1,float r2,float r3,float r4,float r5,float r6,float r7,float r8,float r9,float r10,int r11) {
	kha__Image r16, r17;
	bool r18;
	kha__graphics4__$ImageShaderPainter r14;
	kha__arrays__Float32ArrayPrivate r26;
	float r19, r21, r22, r23, r24;
	double r20, r28;
	vbyte *r25;
	int r13, r15, r27;
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r13 = r14->bufferStart;
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r15 = r14->bufferIndex;
	r13 = r13 + r15;
	r15 = 1;
	r13 = r13 + r15;
	r15 = 1500;
	if( r13 >= r15 ) goto label$b78fc65_12_15;
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r16 = r14->lastTexture;
	if( !r16 ) goto label$b78fc65_12_17;
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r17 = r14->lastTexture;
	if( r1 == r17 ) goto label$b78fc65_12_17;
	label$b78fc65_12_15:
	r18 = false;
	kha_graphics4_ImageShaderPainter_drawBuffer(r0,r18);
	label$b78fc65_12_17:
	r15 = 16711680;
	r13 = r11 & r15;
	r15 = 16;
	r13 = ((unsigned)r13) >> r15;
	r19 = (float)r13;
	r20 = 0.003921568627450980338;
	r21 = (float)r20;
	r19 = r19 * r21;
	r15 = 65280;
	r13 = r11 & r15;
	r15 = 8;
	r13 = ((unsigned)r13) >> r15;
	r21 = (float)r13;
	r20 = 0.003921568627450980338;
	r22 = (float)r20;
	r21 = r21 * r22;
	r15 = 255;
	r13 = r11 & r15;
	r22 = (float)r13;
	r20 = 0.003921568627450980338;
	r23 = (float)r20;
	r22 = r22 * r23;
	r15 = 24;
	r13 = ((unsigned)r11) >> r15;
	r23 = (float)r13;
	r20 = 0.003921568627450980338;
	r24 = (float)r20;
	r23 = r23 * r24;
	r23 = r23 * r10;
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r13 = r14->bufferIndex;
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r15 = r14->bufferStart;
	r13 = r13 - r15;
	r15 = 9;
	r13 = r13 * r15;
	r15 = 4;
	r13 = r13 * r15;
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 5;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r19);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 6;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r21);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 7;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r22);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 8;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r23);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 14;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r19);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 15;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r21);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 16;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r22);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 17;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r23);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 23;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r19);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 24;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r21);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 25;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r22);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 26;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r23);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 32;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r19);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 33;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r21);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 34;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r22);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 35;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r23);
	if( r1 == NULL ) hl_null_access();
	r13 = kha_Image_get_width(r1);
	r20 = (double)r13;
	r13 = kha_Image_get_realWidth(r1);
	r28 = (double)r13;
	r20 = r20 / r28;
	r19 = (float)r20;
	r13 = kha_Image_get_height(r1);
	r20 = (double)r13;
	r13 = kha_Image_get_realHeight(r1);
	r28 = (double)r13;
	r20 = r20 / r28;
	r21 = (float)r20;
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r13 = r14->bufferIndex;
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r15 = r14->bufferStart;
	r13 = r13 - r15;
	r15 = 9;
	r13 = r13 * r15;
	r15 = 4;
	r13 = r13 * r15;
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 3;
	r15 = r13 + r27;
	r27 = 0;
	r22 = (float)r27;
	hl_kore_float32array_set(r25,r15,r22);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 4;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r21);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 12;
	r15 = r13 + r27;
	r27 = 0;
	r22 = (float)r27;
	hl_kore_float32array_set(r25,r15,r22);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 13;
	r15 = r13 + r27;
	r27 = 0;
	r22 = (float)r27;
	hl_kore_float32array_set(r25,r15,r22);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 21;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r19);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 22;
	r15 = r13 + r27;
	r27 = 0;
	r22 = (float)r27;
	hl_kore_float32array_set(r25,r15,r22);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 30;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r19);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 31;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r21);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r13 = r14->bufferIndex;
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r15 = r14->bufferStart;
	r13 = r13 - r15;
	r15 = 9;
	r13 = r13 * r15;
	r15 = 4;
	r13 = r13 * r15;
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	hl_kore_float32array_set(r25,r13,r2);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 1;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r3);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 2;
	r15 = r13 + r27;
	r20 = -5.;
	r19 = (float)r20;
	hl_kore_float32array_set(r25,r15,r19);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 9;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r4);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 10;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r5);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 11;
	r15 = r13 + r27;
	r20 = -5.;
	r19 = (float)r20;
	hl_kore_float32array_set(r25,r15,r19);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 18;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r6);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 19;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r7);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 20;
	r15 = r13 + r27;
	r20 = -5.;
	r19 = (float)r20;
	hl_kore_float32array_set(r25,r15,r19);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 27;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r8);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 28;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r9);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 29;
	r15 = r13 + r27;
	r20 = -5.;
	r19 = (float)r20;
	hl_kore_float32array_set(r25,r15,r19);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r13 = r14->bufferIndex;
	++r13;
	r14->bufferIndex = r13;
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r14->lastTexture = r1;
	return;
}

void kha_graphics4_ImageShaderPainter_drawImage2(kha__graphics4__ImageShaderPainter r0,kha__Image r1,float r2,float r3,float r4,float r5,float r6,float r7,float r8,float r9,float r10,float r11,float r12,float r13,float r14,int r15) {
	kha__Image r20, r21;
	bool r22;
	kha__graphics4__$ImageShaderPainter r18;
	kha__arrays__Float32ArrayPrivate r31;
	float r24, r26, r27, r28, r29;
	double r23, r25;
	vbyte *r30;
	int r17, r19, r32;
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r17 = r18->bufferStart;
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r19 = r18->bufferIndex;
	r17 = r17 + r19;
	r19 = 1;
	r17 = r17 + r19;
	r19 = 1500;
	if( r17 >= r19 ) goto label$b78fc65_13_15;
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r20 = r18->lastTexture;
	if( !r20 ) goto label$b78fc65_13_17;
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r21 = r18->lastTexture;
	if( r1 == r21 ) goto label$b78fc65_13_17;
	label$b78fc65_13_15:
	r22 = false;
	kha_graphics4_ImageShaderPainter_drawBuffer(r0,r22);
	label$b78fc65_13_17:
	r23 = (double)r2;
	if( r1 == NULL ) hl_null_access();
	r17 = kha_Image_get_realWidth(r1);
	r25 = (double)r17;
	r23 = r23 / r25;
	r24 = (float)r23;
	r23 = (double)r3;
	r17 = kha_Image_get_realHeight(r1);
	r25 = (double)r17;
	r23 = r23 / r25;
	r26 = (float)r23;
	r27 = r2 + r4;
	r23 = (double)r27;
	r17 = kha_Image_get_realWidth(r1);
	r25 = (double)r17;
	r23 = r23 / r25;
	r27 = (float)r23;
	r28 = r3 + r5;
	r23 = (double)r28;
	r17 = kha_Image_get_realHeight(r1);
	r25 = (double)r17;
	r23 = r23 / r25;
	r28 = (float)r23;
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r17 = r18->bufferIndex;
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r19 = r18->bufferStart;
	r17 = r17 - r19;
	r19 = 9;
	r17 = r17 * r19;
	r19 = 4;
	r17 = r17 * r19;
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 3;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r24);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 4;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r28);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 12;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r24);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 13;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r26);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 21;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r27);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 22;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r26);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 30;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r27);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 31;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r28);
	r19 = 16711680;
	r17 = r15 & r19;
	r19 = 16;
	r17 = ((unsigned)r17) >> r19;
	r24 = (float)r17;
	r23 = 0.003921568627450980338;
	r26 = (float)r23;
	r24 = r24 * r26;
	r19 = 65280;
	r17 = r15 & r19;
	r19 = 8;
	r17 = ((unsigned)r17) >> r19;
	r26 = (float)r17;
	r23 = 0.003921568627450980338;
	r27 = (float)r23;
	r26 = r26 * r27;
	r19 = 255;
	r17 = r15 & r19;
	r27 = (float)r17;
	r23 = 0.003921568627450980338;
	r28 = (float)r23;
	r27 = r27 * r28;
	r19 = 24;
	r17 = ((unsigned)r15) >> r19;
	r28 = (float)r17;
	r23 = 0.003921568627450980338;
	r29 = (float)r23;
	r28 = r28 * r29;
	r28 = r28 * r14;
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r17 = r18->bufferIndex;
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r19 = r18->bufferStart;
	r17 = r17 - r19;
	r19 = 9;
	r17 = r17 * r19;
	r19 = 4;
	r17 = r17 * r19;
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 5;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r24);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 6;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r26);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 7;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r27);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 8;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r28);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 14;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r24);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 15;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r26);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 16;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r27);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 17;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r28);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 23;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r24);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 24;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r26);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 25;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r27);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 26;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r28);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 32;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r24);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 33;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r26);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 34;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r27);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 35;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r28);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r17 = r18->bufferIndex;
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r19 = r18->bufferStart;
	r17 = r17 - r19;
	r19 = 9;
	r17 = r17 * r19;
	r19 = 4;
	r17 = r17 * r19;
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	hl_kore_float32array_set(r30,r17,r6);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 1;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r7);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 2;
	r19 = r17 + r32;
	r23 = -5.;
	r24 = (float)r23;
	hl_kore_float32array_set(r30,r19,r24);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 9;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r8);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 10;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r9);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 11;
	r19 = r17 + r32;
	r23 = -5.;
	r24 = (float)r23;
	hl_kore_float32array_set(r30,r19,r24);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 18;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r10);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 19;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r11);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 20;
	r19 = r17 + r32;
	r23 = -5.;
	r24 = (float)r23;
	hl_kore_float32array_set(r30,r19,r24);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 27;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r12);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 28;
	r19 = r17 + r32;
	hl_kore_float32array_set(r30,r19,r13);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r31 = r18->rectVertices;
	if( r31 == NULL ) hl_null_access();
	r30 = r31->self;
	r32 = 29;
	r19 = r17 + r32;
	r23 = -5.;
	r24 = (float)r23;
	hl_kore_float32array_set(r30,r19,r24);
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r17 = r18->bufferIndex;
	++r17;
	r18->bufferIndex = r17;
	r18 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r18->lastTexture = r1;
	return;
}

void kha_graphics4_ImageShaderPainter_drawImageScale(kha__graphics4__ImageShaderPainter r0,kha__Image r1,float r2,float r3,float r4,float r5,float r6,float r7,float r8,float r9,float r10,int r11) {
	kha__Image r16, r17;
	bool r18;
	kha__graphics4__$ImageShaderPainter r14;
	kha__arrays__Float32ArrayPrivate r26;
	float r20, r22, r23, r24;
	double r19, r21;
	vbyte *r25;
	int r13, r15, r27;
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r13 = r14->bufferStart;
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r15 = r14->bufferIndex;
	r13 = r13 + r15;
	r15 = 1;
	r13 = r13 + r15;
	r15 = 1500;
	if( r13 >= r15 ) goto label$b78fc65_14_15;
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r16 = r14->lastTexture;
	if( !r16 ) goto label$b78fc65_14_17;
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r17 = r14->lastTexture;
	if( r1 == r17 ) goto label$b78fc65_14_17;
	label$b78fc65_14_15:
	r18 = false;
	kha_graphics4_ImageShaderPainter_drawBuffer(r0,r18);
	label$b78fc65_14_17:
	r19 = (double)r2;
	if( r1 == NULL ) hl_null_access();
	r13 = kha_Image_get_realWidth(r1);
	r21 = (double)r13;
	r19 = r19 / r21;
	r20 = (float)r19;
	r19 = (double)r3;
	r13 = kha_Image_get_realHeight(r1);
	r21 = (double)r13;
	r19 = r19 / r21;
	r22 = (float)r19;
	r23 = r2 + r4;
	r19 = (double)r23;
	r13 = kha_Image_get_realWidth(r1);
	r21 = (double)r13;
	r19 = r19 / r21;
	r23 = (float)r19;
	r24 = r3 + r5;
	r19 = (double)r24;
	r13 = kha_Image_get_realHeight(r1);
	r21 = (double)r13;
	r19 = r19 / r21;
	r24 = (float)r19;
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r13 = r14->bufferIndex;
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r15 = r14->bufferStart;
	r13 = r13 - r15;
	r15 = 9;
	r13 = r13 * r15;
	r15 = 4;
	r13 = r13 * r15;
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 3;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r20);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 4;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r24);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 12;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r20);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 13;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r22);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 21;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r23);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 22;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r22);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 30;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r23);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 31;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r24);
	r15 = 16711680;
	r13 = r11 & r15;
	r15 = 16;
	r13 = ((unsigned)r13) >> r15;
	r20 = (float)r13;
	r19 = 0.003921568627450980338;
	r22 = (float)r19;
	r20 = r20 * r22;
	r15 = 65280;
	r13 = r11 & r15;
	r15 = 8;
	r13 = ((unsigned)r13) >> r15;
	r22 = (float)r13;
	r19 = 0.003921568627450980338;
	r23 = (float)r19;
	r22 = r22 * r23;
	r15 = 255;
	r13 = r11 & r15;
	r23 = (float)r13;
	r19 = 0.003921568627450980338;
	r24 = (float)r19;
	r23 = r23 * r24;
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r13 = r14->bufferIndex;
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r15 = r14->bufferStart;
	r13 = r13 - r15;
	r15 = 9;
	r13 = r13 * r15;
	r15 = 4;
	r13 = r13 * r15;
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 5;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r20);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 6;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r22);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 7;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r23);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 8;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r10);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 14;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r20);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 15;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r22);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 16;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r23);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 17;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r10);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 23;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r20);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 24;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r22);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 25;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r23);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 26;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r10);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 32;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r20);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 33;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r22);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 34;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r23);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 35;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r10);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r13 = r14->bufferIndex;
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r15 = r14->bufferStart;
	r13 = r13 - r15;
	r15 = 9;
	r13 = r13 * r15;
	r15 = 4;
	r13 = r13 * r15;
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	hl_kore_float32array_set(r25,r13,r6);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 1;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r9);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 2;
	r15 = r13 + r27;
	r19 = -5.;
	r20 = (float)r19;
	hl_kore_float32array_set(r25,r15,r20);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 9;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r6);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 10;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r7);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 11;
	r15 = r13 + r27;
	r19 = -5.;
	r20 = (float)r19;
	hl_kore_float32array_set(r25,r15,r20);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 18;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r8);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 19;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r7);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 20;
	r15 = r13 + r27;
	r19 = -5.;
	r20 = (float)r19;
	hl_kore_float32array_set(r25,r15,r20);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 27;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r8);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 28;
	r15 = r13 + r27;
	hl_kore_float32array_set(r25,r15,r9);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r26 = r14->rectVertices;
	if( r26 == NULL ) hl_null_access();
	r25 = r26->self;
	r27 = 29;
	r15 = r13 + r27;
	r19 = -5.;
	r20 = (float)r19;
	hl_kore_float32array_set(r25,r15,r20);
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r13 = r14->bufferIndex;
	++r13;
	r14->bufferIndex = r13;
	r14 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r14->lastTexture = r1;
	return;
}

void kha_graphics4_ImageShaderPainter_end(kha__graphics4__ImageShaderPainter r0) {
	kha__Image r6;
	bool r5;
	kha__graphics4__$ImageShaderPainter r3;
	int r2, r4;
	r3 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r2 = r3->bufferIndex;
	r4 = 0;
	if( r4 >= r2 ) goto label$b78fc65_15_6;
	r5 = true;
	kha_graphics4_ImageShaderPainter_drawBuffer(r0,r5);
	label$b78fc65_15_6:
	r6 = NULL;
	r3 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r3->lastTexture = r6;
	return;
}

void kha_graphics4_ImageShaderPainter_new(kha__graphics4__ImageShaderPainter r0,vvirtual* r1) {
	vvirtual *r2;
	bool r3;
	kha__graphics4__$ImageShaderPainter r5;
	int r4;
	r2 = NULL;
	r0->myPipeline = r2;
	r3 = false;
	r0->bilinearMipmaps = r3;
	r3 = false;
	r0->bilinear = r3;
	r0->g = r1;
	r4 = 0;
	r5 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r5->bufferStart = r4;
	r4 = 0;
	r5 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r5->bufferIndex = r4;
	kha_graphics4_ImageShaderPainter_initShaders();
	r5 = (kha__graphics4__$ImageShaderPainter)g$a0efbdf;
	r2 = r5->standardImagePipeline;
	r0->myPipeline = r2;
	kha_graphics4_ImageShaderPainter_initBuffers(r0);
	return;
}

