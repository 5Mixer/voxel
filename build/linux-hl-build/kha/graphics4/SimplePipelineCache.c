// Generated by HLC 4.1.3 (HL v4)
#define HLC_BOOT
#include <hlc.h>
#include <kha/graphics4/SimplePipelineCache.h>
#include <kha/graphics4/PipelineState.h>
#include <haxe/Exception.h>
#include <hl/types/ArrayDyn.h>
#include <haxe/Log.h>
extern String s$projectionMatrix;
vvirtual* kha_graphics4_PipelineState_getConstantLocation(kha__graphics4__PipelineState,String);
haxe__Exception haxe_Exception_caught(vdynamic*);
extern haxe__$Log g$_haxe_Log;
extern hl_type t$vrt_329ffa8;
extern String s$kha_graphics4_Graphics2_hx;
extern hl_type t$String;
extern hl_type t$_i32;
extern String s$8075a27;
extern String s$new;
extern hl_type t$vrt_eaa6a3b;
extern String s$tex;
vvirtual* kha_graphics4_PipelineState_getTextureUnit(kha__graphics4__PipelineState,String);
extern hl_type t$kha_graphics4_InternalPipeline;
void kha_graphics4_InternalPipeline_new(kha__graphics4__InternalPipeline,kha__graphics4__PipelineState,vvirtual*,vvirtual*);

void kha_graphics4_SimplePipelineCache_new(kha__graphics4__SimplePipelineCache r0,kha__graphics4__PipelineState r1,bool r2) {
	String r7;
	vvirtual *r3, *r6, *r13, *r15, *r16;
	haxe__$Log r11;
	kha__graphics4__InternalPipeline r17;
	vclosure *r10;
	haxe__Exception r9;
	vdynamic *r5, *r8, *r12;
	int r14;
	hl_trap_ctx trap$0;
	r3 = NULL;
	hl_trap(trap$0,r5,label$462f67d_1_8);
	if( r1 == NULL ) hl_null_access();
	r7 = (String)s$projectionMatrix;
	r6 = kha_graphics4_PipelineState_getConstantLocation(r1,r7);
	r3 = r6;
	hl_endtrap(trap$0);
	goto label$462f67d_1_26;
	label$462f67d_1_8:
	r8 = NULL;
	r9 = haxe_Exception_caught(r5);
	if( r9 == NULL ) hl_null_access();
	r8 = ((vdynamic* (*)(haxe__Exception))r9->$type->vobj_proto[0])(r9);
	r11 = (haxe__$Log)g$_haxe_Log;
	r10 = r11->trace;
	if( r10 == NULL ) hl_null_access();
	r13 = hl_alloc_virtual(&t$vrt_329ffa8);
	r7 = (String)s$kha_graphics4_Graphics2_hx;
	if( hl_vfields(r13)[1] ) *(String*)(hl_vfields(r13)[1]) = (String)r7; else hl_dyn_setp(r13->value,37969014/*fileName*/,&t$String,r7);
	r14 = 57;
	if( hl_vfields(r13)[2] ) *(int*)(hl_vfields(r13)[2]) = (int)r14; else hl_dyn_seti(r13->value,371360620/*lineNumber*/,&t$_i32,r14);
	r7 = (String)s$8075a27;
	if( hl_vfields(r13)[0] ) *(String*)(hl_vfields(r13)[0]) = (String)r7; else hl_dyn_setp(r13->value,-63073762/*className*/,&t$String,r7);
	r7 = (String)s$new;
	if( hl_vfields(r13)[3] ) *(String*)(hl_vfields(r13)[3]) = (String)r7; else hl_dyn_setp(r13->value,302979532/*methodName*/,&t$String,r7);
	r15 = hl_to_virtual(&t$vrt_eaa6a3b,(vdynamic*)r13);
	r10->hasValue ? ((void (*)(vdynamic*,vdynamic*,vvirtual*))r10->fun)((vdynamic*)r10->value,r8,r15) : ((void (*)(vdynamic*,vvirtual*))r10->fun)(r8,r15);
	label$462f67d_1_26:
	r6 = NULL;
	if( !r2 ) goto label$462f67d_1_53;
	hl_trap(trap$0,r8,label$462f67d_1_35);
	if( r1 == NULL ) hl_null_access();
	r7 = (String)s$tex;
	r16 = kha_graphics4_PipelineState_getTextureUnit(r1,r7);
	r6 = r16;
	hl_endtrap(trap$0);
	goto label$462f67d_1_53;
	label$462f67d_1_35:
	r12 = NULL;
	r9 = haxe_Exception_caught(r8);
	if( r9 == NULL ) hl_null_access();
	r12 = ((vdynamic* (*)(haxe__Exception))r9->$type->vobj_proto[0])(r9);
	r11 = (haxe__$Log)g$_haxe_Log;
	r10 = r11->trace;
	if( r10 == NULL ) hl_null_access();
	r13 = hl_alloc_virtual(&t$vrt_329ffa8);
	r7 = (String)s$kha_graphics4_Graphics2_hx;
	if( hl_vfields(r13)[1] ) *(String*)(hl_vfields(r13)[1]) = (String)r7; else hl_dyn_setp(r13->value,37969014/*fileName*/,&t$String,r7);
	r14 = 66;
	if( hl_vfields(r13)[2] ) *(int*)(hl_vfields(r13)[2]) = (int)r14; else hl_dyn_seti(r13->value,371360620/*lineNumber*/,&t$_i32,r14);
	r7 = (String)s$8075a27;
	if( hl_vfields(r13)[0] ) *(String*)(hl_vfields(r13)[0]) = (String)r7; else hl_dyn_setp(r13->value,-63073762/*className*/,&t$String,r7);
	r7 = (String)s$new;
	if( hl_vfields(r13)[3] ) *(String*)(hl_vfields(r13)[3]) = (String)r7; else hl_dyn_setp(r13->value,302979532/*methodName*/,&t$String,r7);
	r15 = hl_to_virtual(&t$vrt_eaa6a3b,(vdynamic*)r13);
	r10->hasValue ? ((void (*)(vdynamic*,vdynamic*,vvirtual*))r10->fun)((vdynamic*)r10->value,r12,r15) : ((void (*)(vdynamic*,vvirtual*))r10->fun)(r12,r15);
	label$462f67d_1_53:
	r17 = (kha__graphics4__InternalPipeline)hl_alloc_obj(&t$kha_graphics4_InternalPipeline);
	kha_graphics4_InternalPipeline_new(r17,r1,r3,r6);
	r0->pipeline = r17;
	return;
}

kha__graphics4__InternalPipeline kha_graphics4_SimplePipelineCache_get(kha__graphics4__SimplePipelineCache r0,hl__types__ArrayBytes_Int r1,int r2) {
	kha__graphics4__InternalPipeline r3;
	r3 = r0->pipeline;
	return r3;
}

